import{r as c,u as b,j as e,B as u,T as x,a as f,G as C,P as y,L as M,b as W,A as O,c as R,d as S,I as P,e as K,S as q,D as z,f as G,g as V,h as X,i as Q,W as Y,k as Z,K as ee,N as _,l as te,m as se,n as k,o as ne,p as T,q as re,s as ae,t as ie,O as oe,R as le,v as ce,w as de,C as he,x as xe,y as ue,F as D,z as N,E,M as I,H,J as U,Q as A,U as p,V as J,X as je,Y as pe,Z as me,_ as ge,$ as fe,a0 as j}from"./assets/vendor-St8hzqEj.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();function ye(){const[t,s]=c.useState([]),[i,d]=c.useState(""),[n,r]=c.useState("");b(),c.useEffect(()=>{fetch("http://localhost:5000/products").then(a=>a.json()).then(a=>{Array.isArray(a)?s(a):console.error("Products is not an array:",a)}).catch(a=>console.error(a))},[]);const o=t.filter(a=>{const v=a.title.toLowerCase().includes(i.toLowerCase()),l=n?a.price<=Number(n):!0;return v&&l});return e.jsxs(u,{sx:{p:3,maxWidth:1200,mx:"auto"},children:[e.jsx(x,{variant:"h4",align:"center",sx:{mb:4},children:"Список товарів"}),e.jsxs(u,{sx:{display:"flex",gap:2,mb:4},children:[e.jsx(f,{label:"Пошук товару",variant:"outlined",fullWidth:!0,value:i,onChange:a=>d(a.target.value)}),e.jsx(f,{label:"Макс. ціна",type:"number",variant:"outlined",sx:{width:150},value:n,onChange:a=>r(a.target.value)})]}),e.jsx(C,{container:!0,spacing:3,children:o.length?o.map(a=>e.jsx(C,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(y,{sx:{p:2,display:"flex",flexDirection:"column",alignItems:"center",height:"100%"},children:[e.jsxs(M,{to:`/products/${a._id}`,style:{textDecoration:"none",color:"inherit",width:"100%"},children:[e.jsx("img",{src:"https://picsum.photos/150",alt:a.title,style:{width:"100%",height:150,objectFit:"cover",borderRadius:6,marginBottom:12}}),e.jsx(x,{variant:"h6",sx:{mb:1},children:a.title})]}),e.jsxs(x,{variant:"body2",sx:{mb:2},children:["Ціна: ",a.price," грн"]})]})},a._id)):e.jsx(x,{children:"Товари не знайдено"})})]})}function be(){const{id:t}=W(),[s,i]=c.useState(null),[d,n]=c.useState(!0);return c.useEffect(()=>{fetch(`http://localhost:5000/products/${t}`).then(r=>r.json()).then(r=>{i(r),n(!1)}).catch(r=>{console.error(r),n(!1)})},[t]),d?e.jsx("p",{children:"Завантаження товару..."}):s?e.jsxs("div",{style:{padding:20},children:[e.jsx(M,{to:"/",style:{textDecoration:"none",color:"#007bff"},children:"← Повернутися до списку товарів"}),e.jsx("h1",{children:s.title}),e.jsx("img",{src:s.image,alt:s.title,width:"300"}),e.jsxs("p",{children:["Ціна: ",s.price," грн"]}),e.jsxs("p",{children:["Опис: ",s.description||"Опис відсутній"]})]}):e.jsx("p",{children:"Товар не знайдено"})}function ve(){const t=b();c.useEffect(()=>{localStorage.getItem("userToken")||t("/login")},[t])}function Ce(){ve();const[t,s]=c.useState(!1),[i,d]=c.useState(""),[n,r]=c.useState(""),o=b(),a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,v=async l=>{if(l.preventDefault(),!i||!n){alert("Введіть логін та пароль");return}if(!(i.toLowerCase()==="admin")&&!a.test(i)){alert("Введіть коректний email");return}try{const g=await fetch("http://localhost:5000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.toLowerCase(),password:n})}),h=await g.json();if(!g.ok){alert(h.error||"Невірний логін або пароль");return}localStorage.setItem("userToken",h.token),localStorage.setItem("userRole",h.role||"user"),h.role==="admin"?(localStorage.setItem("isAdmin","true"),o("/admin")):(localStorage.setItem("userToken",h.token),localStorage.setItem("userRole",h.role||"user"),o("/"))}catch(g){console.error(g),alert("Помилка сервера")}};return e.jsxs("div",{style:{padding:20},children:[e.jsx("h1",{children:t?"Реєстрація":"Вхід в аккаунт"}),e.jsxs("form",{onSubmit:v,children:[e.jsx("input",{type:"text",placeholder:"Логін",value:i,onChange:l=>d(l.target.value),style:{padding:"5px",marginRight:"10px",marginBottom:"10px"}}),e.jsx("br",{}),e.jsx("input",{type:"password",placeholder:"Пароль",value:n,onChange:l=>r(l.target.value),style:{padding:"5px",marginBottom:"10px"}}),e.jsx("br",{}),e.jsx("button",{type:"submit",children:t?"Зареєструватися":"Увійти"})]}),e.jsx("button",{onClick:()=>s(!t),style:{marginTop:"10px"},children:t?"Увійти":"Зареєструватися"})]})}function Se(t){if(!t)return!1;try{const s=JSON.parse(atob(t.split(".")[1])),i=Math.floor(Date.now()/1e3);return s.exp>i}catch{return!1}}function we({cartItems:t}){const s=b(),[i,d]=c.useState(!1),n=()=>{const o=localStorage.getItem("userToken");if(!Se(o)){localStorage.removeItem("userToken"),s("/login",{replace:!0});return}d(!0)},r=()=>d(!1);return e.jsxs(e.Fragment,{children:[e.jsx(O,{position:"sticky",sx:{top:0,zIndex:1100},children:e.jsxs(R,{sx:{position:"relative",display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{sx:{zIndex:1},children:e.jsx(x,{variant:"h6",children:"TechMarket"})}),e.jsxs(u,{sx:{display:"flex",gap:2,position:"absolute",left:"50%",transform:"translateX(-50%)"},children:[e.jsx(S,{color:"inherit",onClick:()=>s("/"),children:"Home"}),e.jsx(S,{color:"inherit",onClick:()=>s("/login"),children:"Login"})]}),e.jsx(P,{color:"inherit",onClick:n,children:e.jsx(K,{badgeContent:t.length,color:"secondary",children:e.jsx(q,{})})})]})}),e.jsxs(z,{open:i,onClose:r,children:[e.jsx(G,{children:"Ваша корзина"}),e.jsx(V,{children:t.length===0?e.jsx(x,{children:"Корзина порожня"}):e.jsx("ul",{children:t.map((o,a)=>e.jsxs("li",{children:[o.name," - ",o.quantity]},a))})}),e.jsx(X,{children:e.jsx(S,{onClick:r,children:"Закрити"})})]})]})}function Pe(){const t=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx(O,{position:"static",sx:{top:"auto",bottom:0,mt:2},children:e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(x,{variant:"h6",children:"TechMarket"}),e.jsxs(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(P,{color:"inherit",component:"a",href:"https://t.me/yourtelegram",target:"_blank",children:e.jsx(Q,{})}),e.jsx(P,{color:"inherit",component:"a",href:"https://web.whatsapp.com",target:"_blank",children:e.jsx(Y,{})}),e.jsx(P,{color:"inherit",component:"a",href:"viber://chat?number=yourviber",target:"_blank",children:e.jsx(Z,{})}),e.jsx(P,{color:"inherit",onClick:t,children:e.jsx(ee,{})})]})]})})}function w({children:t,cartItems:s}){return e.jsxs(u,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(we,{cartItems:s}),e.jsx(u,{component:"main",sx:{mt:2},children:t}),e.jsx(Pe,{})]})}function ke({children:t}){return localStorage.getItem("isAdmin")==="true"?t:e.jsx(_,{to:"/"})}function Te(){const[t,s]=c.useState(""),[i,d]=c.useState(!1),n=async r=>{r.preventDefault();try{const o=await fetch("http://localhost:5000/auth/forgot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),a=await o.json();o.ok?d(!0):alert(a.error)}catch{alert("Помилка сервера")}};return i?e.jsx("h2",{children:"Лист для відновлення паролю відправлено!"}):e.jsxs("div",{style:{padding:20},children:[e.jsx("h1",{children:"Відновлення паролю"}),e.jsxs("form",{onSubmit:n,children:[e.jsx("input",{type:"email",placeholder:"Введіть ваш Email",value:t,onChange:r=>s(r.target.value),style:{padding:"5px",width:"250px"}}),e.jsx("br",{}),e.jsx("button",{style:{marginTop:"10px"},children:"Відправити лист"})]})]})}function Ie(){const{token:t}=W(),s=b(),[i,d]=c.useState(""),n=async r=>{r.preventDefault();try{const o=await fetch(`http://localhost:5000/auth/reset/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:i})}),a=await o.json();o.ok?(alert("Пароль оновлено!"),s("/login")):alert(a.error)}catch{alert("Помилка сервера")}};return e.jsxs("div",{style:{padding:20},children:[e.jsx("h1",{children:"Створення нового паролю"}),e.jsxs("form",{onSubmit:n,children:[e.jsx("input",{type:"password",placeholder:"Новий пароль",value:i,onChange:r=>d(r.target.value),style:{padding:"5px",width:"250px"}}),e.jsx("br",{}),e.jsx("button",{style:{marginTop:"10px"},children:"Оновити пароль"})]})]})}function Le(){const t=b();return e.jsx(te,{variant:"permanent",sx:{width:240},children:e.jsxs(se,{sx:{width:240},children:[e.jsxs(k,{onClick:()=>t("/admin/products"),children:[e.jsx(ne,{sx:{mr:1}}),e.jsx(T,{primary:"Products"})]}),e.jsxs(k,{onClick:()=>t("/admin/addproduct"),children:[e.jsx(re,{sx:{mr:1}}),e.jsx(T,{primary:"Add Product"})]}),e.jsxs(k,{onClick:()=>t("/admin/clients"),children:[e.jsx(ae,{sx:{mr:1}}),e.jsx(T,{primary:"Clients"})]}),e.jsxs(k,{onClick:()=>t("/admin/dashboard"),children:[e.jsx(ie,{sx:{mr:1}}),e.jsx(T,{primary:"Dashboard"})]})]})})}function Ae(){const t=b(),s=()=>{localStorage.removeItem("userToken"),localStorage.removeItem("userRole"),localStorage.removeItem("isAdmin"),t("/")};return e.jsx(O,{position:"static",sx:{background:"#1976d2"},children:e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(x,{variant:"h6",children:"Admin Panel"}),e.jsx(S,{variant:"contained",color:"secondary",onClick:s,children:"Exit"})]})})}function Oe(){return e.jsxs(u,{sx:{display:"flex",height:"100vh",background:"#f5f5f5"},children:[e.jsx(Le,{}),e.jsxs(u,{sx:{flexGrow:1},children:[e.jsx(Ae,{}),e.jsx(u,{sx:{p:3},children:e.jsx(oe,{})})]})]})}const F=[{name:"Online",value:400},{name:"Offline",value:300},{name:"Mobile App",value:200}],B=["#0088FE","#00C49F","#FFBB28"];function L(){return e.jsx(le,{width:"100%",height:300,children:e.jsxs(ce,{children:[e.jsx(de,{data:F,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:F.map((t,s)=>e.jsx(he,{fill:B[s%B.length]},`cell-${s}`))}),e.jsx(xe,{}),e.jsx(ue,{})]})})}function Re(){return e.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:2},children:e.jsxs(C,{container:!0,spacing:3,children:[e.jsx(C,{item:!0,xs:6,children:e.jsxs(y,{sx:{p:2,width:150,height:350},children:[e.jsx(x,{variant:"h6",children:"Sales by cat"}),e.jsx(L,{})]})}),e.jsx(C,{item:!0,xs:6,children:e.jsxs(y,{sx:{p:2,width:150,height:350},children:[e.jsx(x,{variant:"h6",children:"Sales by month"}),e.jsx(L,{})]})}),e.jsx(C,{item:!0,xs:6,children:e.jsxs(y,{sx:{p:2,width:150,height:350},children:[e.jsx(x,{variant:"h6",children:"Sales by amount"}),e.jsx(L,{})]})}),e.jsx(C,{item:!0,xs:6,children:e.jsxs(y,{sx:{p:2,width:150,height:350},children:[e.jsx(x,{variant:"h6",children:"Users income"}),e.jsx(L,{})]})})]})})}function De(){const[t,s]=c.useState([]),[i,d]=c.useState(""),[n,r]=c.useState(""),[o,a]=c.useState("asc");c.useEffect(()=>{(async()=>{try{const g=await(await fetch("http://localhost:5000/products")).json();s(g)}catch(m){console.error(m)}})()},[]);const v=t.filter(l=>l.title&&l.title.toLowerCase().includes(i.toLowerCase())).sort((l,m)=>n?o==="asc"?Number(l[n])-Number(m[n]):Number(m[n])-Number(l[n]):0);return e.jsxs(y,{sx:{p:3},children:[e.jsx(x,{align:"center",variant:"h4",sx:{mb:2},children:"Products"}),e.jsxs(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:2},children:[e.jsx(f,{label:"Enter name",value:i,onChange:l=>d(l.target.value),sx:{mb:2,mr:2}}),e.jsxs(D,{sx:{mb:2,minWidth:150},children:[e.jsx(N,{children:"Sorted by"}),e.jsxs(E,{value:n,onChange:l=>r(l.target.value),label:"Сортувати за",children:[e.jsx(I,{value:"price",children:"Price"}),e.jsx(I,{value:"stock",children:"Available"})]})]}),e.jsxs(D,{sx:{mb:2,minWidth:120,ml:2},children:[e.jsx(N,{children:"Order"}),e.jsxs(E,{value:o,onChange:l=>a(l.target.value),label:"Порядок",children:[e.jsx(I,{value:"asc",children:"toHighest"}),e.jsx(I,{value:"desc",children:"toLower"})]})]})]}),e.jsxs(H,{children:[e.jsx(U,{children:e.jsxs(A,{children:[e.jsx(p,{align:"left",children:"Name"}),e.jsx(p,{align:"center",children:"Price"}),e.jsx(p,{align:"center",children:"Available"})]})}),e.jsx(J,{children:v.map(l=>e.jsxs(A,{children:[e.jsx(p,{align:"left",children:l.title}),e.jsx(p,{align:"center",children:l.price}),e.jsx(p,{align:"center",children:l.stock})]},l._id))})]})]})}function Ne(){const[t,s]=c.useState([]);return c.useEffect(()=>{(async()=>{try{const r=(await(await fetch("http://localhost:5000/users")).json()).filter(o=>o.role!=="admin");s(r)}catch(d){console.error(d)}})()},[]),e.jsxs(y,{sx:{p:3},children:[e.jsx(x,{align:"center",variant:"h4",sx:{mb:2},children:"Clients"}),e.jsxs(H,{children:[e.jsx(U,{children:e.jsxs(A,{children:[e.jsx(p,{children:"Email"}),e.jsx(p,{children:"Role"})]})}),e.jsx(J,{children:t.map(i=>e.jsxs(A,{children:[e.jsx(p,{children:i.email}),e.jsx(p,{children:i.role})]},i._id))})]})]})}function Ee(){const t=b(),[s,i]=c.useState(""),[d,n]=c.useState(""),[r,o]=c.useState(""),[a,v]=c.useState(""),[l,m]=c.useState(""),g=async()=>{if(!s||!r||!a)return;const h={title:s,description:d,price:Number(r),stock:Number(a),imageUrl:l||"https://via.placeholder.com/150"};try{await fetch("http://localhost:5000/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),t("/admin/products")}catch($){console.error($)}};return e.jsxs(y,{sx:{p:4,maxWidth:600,mx:"auto"},children:[e.jsx(x,{variant:"h4",sx:{mb:3},children:"Add New Product"}),e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(f,{label:"Name",value:s,onChange:h=>i(h.target.value)}),e.jsx(f,{label:"Description",value:d,onChange:h=>n(h.target.value)}),e.jsx(f,{label:"Price",type:"number",value:r,onChange:h=>o(h.target.value)}),e.jsx(f,{label:"Available",type:"number",value:a,onChange:h=>v(h.target.value)}),e.jsx(f,{label:"Image URL",value:l,onChange:h=>m(h.target.value)}),e.jsx(S,{variant:"contained",onClick:g,children:"Create Product"}),e.jsx(S,{variant:"outlined",onClick:()=>t("/admin/products"),children:"Cancel"})]})]})}function Fe(){const[t,s]=c.useState([]);return ge(),e.jsx(e.Fragment,{children:e.jsxs(fe,{children:[e.jsx(j,{path:"/",element:e.jsx(w,{cartItems:t,children:e.jsx(ye,{})})}),e.jsx(j,{path:"/products/:id",element:e.jsx(w,{cartItems:t,children:e.jsx(be,{})})}),e.jsx(j,{path:"/login",element:e.jsx(w,{cartItems:t,children:e.jsx(Ce,{})})}),e.jsx(j,{path:"/forgot-password",element:e.jsx(w,{cartItems:t,children:e.jsx(Te,{})})}),e.jsx(j,{path:"/reset/:token",element:e.jsx(w,{cartItems:t,children:e.jsx(Ie,{})})}),e.jsxs(j,{path:"/admin/*",element:e.jsx(ke,{children:e.jsx(Oe,{})}),children:[e.jsx(j,{index:!0,element:e.jsx(_,{to:"products"})}),e.jsx(j,{path:"products",element:e.jsx(De,{})}),e.jsx(j,{path:"clients",element:e.jsx(Ne,{})}),e.jsx(j,{path:"dashboard",element:e.jsx(Re,{})}),e.jsx(j,{path:"addproduct",element:e.jsx(Ee,{})})]})]})})}je.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(me,{basename:"/marketplace",children:e.jsx(Fe,{})})}));
//# sourceMappingURL=index.js.map
