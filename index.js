import{r as o,u as C,j as e,B as u,T as h,a as m,G as S,P as j,L as B,b as M,c as y,d as K,A as O,e as R,I as k,f as q,S as z,D as G,g as V,h as X,i as Q,k as Y,W as Z,l as ee,K as te,N as _,m as se,n as ne,o as P,p as re,q as I,s as ae,t as ie,v as le,O as oe,R as ce,w as de,x as he,C as xe,y as ue,z as me,F as D,E as N,H as W,M as T,J as H,Q as U,U as L,V as g,X as $,Y as je,Z as pe,_ as fe,$ as ge,a0 as ye,a1 as f}from"./assets/vendor-VgNhMV9M.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();function be(){const[t,s]=o.useState([]),[i,d]=o.useState(""),[n,r]=o.useState("");C(),o.useEffect(()=>{fetch("https://marketplace-production-2e6c.up.railway.app/products").then(a=>a.json()).then(a=>{Array.isArray(a)?s(a):console.error("Products is not an array:",a)}).catch(a=>console.error(a))},[]);const c=t.filter(a=>{const p=a.title.toLowerCase().includes(i.toLowerCase()),l=n?a.price<=Number(n):!0;return p&&l});return e.jsxs(u,{sx:{p:3,maxWidth:1200,mx:"auto"},children:[e.jsx(h,{variant:"h4",align:"center",sx:{mb:4},children:"Список товарів"}),e.jsxs(u,{sx:{display:"flex",gap:2,mb:4},children:[e.jsx(m,{label:"Пошук товару",variant:"outlined",fullWidth:!0,value:i,onChange:a=>d(a.target.value)}),e.jsx(m,{label:"Макс. ціна",type:"number",variant:"outlined",sx:{width:150},value:n,onChange:a=>r(a.target.value)})]}),e.jsx(S,{container:!0,spacing:3,children:c.length?c.map(a=>e.jsx(S,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(j,{sx:{p:2,display:"flex",flexDirection:"column",alignItems:"center",height:"100%"},children:[e.jsxs(B,{to:`/products/${a._id}`,style:{textDecoration:"none",color:"inherit",width:"100%"},children:[e.jsx("img",{src:"https://picsum.photos/150",alt:a.title,style:{width:"100%",height:150,objectFit:"cover",borderRadius:6,marginBottom:12}}),e.jsx(h,{variant:"h6",sx:{mb:1},children:a.title})]}),e.jsxs(h,{variant:"body2",sx:{mb:2},children:["Ціна: ",a.price," грн"]})]})},a._id)):e.jsx(h,{children:"Товари не знайдено"})})]})}function ve(){const{id:t}=M(),[s,i]=o.useState(null),[d,n]=o.useState(!0);return o.useEffect(()=>{fetch(`https://marketplace-production-2e6c.up.railway.app/products/${t}`).then(r=>r.json()).then(r=>{i(r),n(!1)}).catch(r=>{console.error(r),n(!1)})},[t]),d?e.jsx("p",{children:"Завантаження товару..."}):s?e.jsxs("div",{style:{padding:20},children:[e.jsx(B,{to:"/",style:{textDecoration:"none",color:"#007bff"},children:"← Повернутися до списку товарів"}),e.jsx("h1",{children:s.title}),e.jsx("img",{src:s.image,alt:s.title,width:"300"}),e.jsxs("p",{children:["Ціна: ",s.price," грн"]}),e.jsxs("p",{children:["Опис: ",s.description||"Опис відсутній"]})]}):e.jsx("p",{children:"Товар не знайдено"})}function Ce(){const t=C();o.useEffect(()=>{localStorage.getItem("userToken")||t("/login")},[t])}function Se(){Ce();const[t,s]=o.useState(!1),[i,d]=o.useState(""),[n,r]=o.useState(""),c=C(),a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,p=async l=>{if(l.preventDefault(),!i||!n){alert("Введіть логін та пароль");return}if(!(i.toLowerCase()==="admin")&&!a.test(i)){alert("Введіть коректний email");return}try{const v=await fetch("https://marketplace-production-2e6c.up.railway.app/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.toLowerCase(),password:n})}),x=await v.json();if(!v.ok){alert(x.error||"Невірний логін або пароль");return}localStorage.setItem("userToken",x.token),localStorage.setItem("userRole",x.role||"user"),x.role==="admin"?(localStorage.setItem("isAdmin","true"),c("/admin")):(localStorage.setItem("userToken",x.token),localStorage.setItem("userRole",x.role||"user"),c("/"))}catch(v){console.error(v),alert("Помилка сервера")}};return e.jsx(u,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",pt:8},children:e.jsxs(j,{sx:{p:4,maxWidth:400,width:"100%"},children:[e.jsx(h,{variant:"h5",mb:2,textAlign:"center",children:t?"Реєстрація":"Вхід в акаунт"}),e.jsxs("form",{onSubmit:p,children:[e.jsx(m,{fullWidth:!0,label:"Email або логін",margin:"normal",value:i,onChange:l=>d(l.target.value)}),e.jsx(m,{fullWidth:!0,type:"password",label:"Пароль",margin:"normal",value:n,onChange:l=>r(l.target.value)}),e.jsx(y,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:2},children:t?"Зареєструватися":"Увійти"})]}),e.jsx(y,{fullWidth:!0,variant:"text",sx:{mt:1},onClick:()=>s(!t),children:t?"Увійти":"Зареєструватися"}),!t&&e.jsx(h,{variant:"body2",align:"center",sx:{mt:1},children:e.jsx(K,{href:"/forgot-password",underline:"hover",children:"Забули пароль?"})})]})})}function we(t){if(!t)return!1;try{const s=JSON.parse(atob(t.split(".")[1])),i=Math.floor(Date.now()/1e3);return s.exp>i}catch{return!1}}function ke({cartItems:t}){const s=C(),[i,d]=o.useState(!1),n=()=>{const c=localStorage.getItem("userToken");if(!we(c)){localStorage.removeItem("userToken"),s("/login",{replace:!0});return}d(!0)},r=()=>d(!1);return e.jsxs(e.Fragment,{children:[e.jsx(O,{position:"sticky",sx:{top:0,zIndex:1100},children:e.jsxs(R,{sx:{position:"relative",display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{sx:{zIndex:1},children:e.jsx(h,{variant:"h6",children:"TechMarket"})}),e.jsxs(u,{sx:{display:"flex",gap:2,position:"absolute",left:"50%",transform:"translateX(-50%)"},children:[e.jsx(y,{color:"inherit",onClick:()=>s("/"),children:"Home"}),e.jsx(y,{color:"inherit",onClick:()=>s("/login"),children:"Login"})]}),e.jsx(k,{color:"inherit",onClick:n,children:e.jsx(q,{badgeContent:t.length,color:"secondary",children:e.jsx(z,{})})})]})}),e.jsxs(G,{open:i,onClose:r,children:[e.jsx(V,{children:"Ваша корзина"}),e.jsx(X,{children:t.length===0?e.jsx(h,{children:"Корзина порожня"}):e.jsx("ul",{children:t.map((c,a)=>e.jsxs("li",{children:[c.name," - ",c.quantity]},a))})}),e.jsx(Q,{children:e.jsx(y,{onClick:r,children:"Закрити"})})]})]})}function Pe(){const t=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx(O,{position:"static",sx:{mt:2},children:e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h,{variant:"h6",children:"TechMarket"}),e.jsxs(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(k,{color:"inherit",component:"a",href:"https://t.me/yourtelegram",target:"_blank",children:e.jsx(Y,{})}),e.jsx(k,{color:"inherit",component:"a",href:"https://web.whatsapp.com",target:"_blank",children:e.jsx(Z,{})}),e.jsx(k,{color:"inherit",component:"a",href:"viber://chat?number=yourviber",target:"_blank",children:e.jsx(ee,{})}),e.jsx(k,{color:"inherit",onClick:t,children:e.jsx(te,{})})]})]})})}function w({children:t,cartItems:s}){return e.jsxs(u,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(ke,{cartItems:s}),e.jsx(u,{component:"main",sx:{flex:1,mt:2},children:t}),e.jsx(Pe,{})]})}function Ie({children:t}){return localStorage.getItem("isAdmin")==="true"?t:e.jsx(_,{to:"/"})}function Te(){const[t,s]=o.useState(""),[i,d]=o.useState(!1),n=async r=>{r.preventDefault();try{const c=await fetch("https://marketplace-production-2e6c.up.railway.app/auth/forgot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),a=await c.json();c.ok?d(!0):alert(a.error)}catch{alert("Помилка сервера")}};return e.jsx(u,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",pt:4},children:e.jsx(j,{sx:{p:4,maxWidth:400,width:"100%",textAlign:"center"},children:i?e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"h6",mb:1,children:"Лист для відновлення паролю відправлено!"}),e.jsx(h,{variant:"body2",children:"Перевірте вашу пошту та перейдіть за посиланням для створення нового паролю."})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"h5",mb:2,children:"Відновлення паролю"}),e.jsxs("form",{onSubmit:n,children:[e.jsx(m,{fullWidth:!0,type:"email",label:"Ваш Email",margin:"normal",value:t,onChange:r=>s(r.target.value)}),e.jsx(y,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:2},children:"Відправити лист"})]})]})})})}function Ae(){const{token:t}=M(),s=C(),[i,d]=o.useState(""),[n,r]=o.useState(!1),c=async a=>{a.preventDefault();try{const p=await fetch(`https://marketplace-production-2e6c.up.railway.app/auth/reset/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:i})}),l=await p.json();p.ok?(r(!0),setTimeout(()=>s("/login"),2e3)):alert(l.error)}catch{alert("Помилка сервера")}};return n?e.jsx(u,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",pt:4},children:e.jsxs(j,{sx:{p:4,maxWidth:400,width:"100%",textAlign:"center"},children:[e.jsx(h,{variant:"h6",children:"Пароль успішно оновлено!"}),e.jsx(h,{variant:"body2",sx:{mt:1},children:"Ви будете перенаправлені на сторінку логіну"})]})}):e.jsx(u,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",pt:4},children:e.jsxs(j,{sx:{p:4,maxWidth:400,width:"100%"},children:[e.jsx(h,{variant:"h5",mb:2,textAlign:"center",children:"Створення нового паролю"}),e.jsxs("form",{onSubmit:c,children:[e.jsx(m,{fullWidth:!0,type:"password",label:"Новий пароль",margin:"normal",value:i,onChange:a=>d(a.target.value)}),e.jsx(y,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:2},children:"Оновити пароль"})]})]})})}function Le(){const t=C();return e.jsx(se,{variant:"permanent",sx:{width:240},children:e.jsxs(ne,{sx:{width:240},children:[e.jsxs(P,{onClick:()=>t("/admin/products"),children:[e.jsx(re,{sx:{mr:1}}),e.jsx(I,{primary:"Products"})]}),e.jsxs(P,{onClick:()=>t("/admin/addproduct"),children:[e.jsx(ae,{sx:{mr:1}}),e.jsx(I,{primary:"Add Product"})]}),e.jsxs(P,{onClick:()=>t("/admin/clients"),children:[e.jsx(ie,{sx:{mr:1}}),e.jsx(I,{primary:"Clients"})]}),e.jsxs(P,{onClick:()=>t("/admin/dashboard"),children:[e.jsx(le,{sx:{mr:1}}),e.jsx(I,{primary:"Dashboard"})]})]})})}function Oe(){const t=C(),s=()=>{localStorage.removeItem("userToken"),localStorage.removeItem("userRole"),localStorage.removeItem("isAdmin"),t("/")};return e.jsx(O,{position:"static",sx:{background:"#1976d2"},children:e.jsxs(R,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h,{variant:"h6",children:"Admin Panel"}),e.jsx(y,{variant:"contained",color:"secondary",onClick:s,children:"Exit"})]})})}function Re(){return e.jsxs(u,{sx:{display:"flex",height:"100vh",background:"#f5f5f5"},children:[e.jsx(Le,{}),e.jsxs(u,{sx:{flexGrow:1},children:[e.jsx(Oe,{}),e.jsx(u,{sx:{p:3},children:e.jsx(oe,{})})]})]})}const E=[{name:"Online",value:400},{name:"Offline",value:300},{name:"Mobile App",value:200}],F=["#0088FE","#00C49F","#FFBB28"];function A(){return e.jsx(ce,{width:"100%",height:300,children:e.jsxs(de,{children:[e.jsx(he,{data:E,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:E.map((t,s)=>e.jsx(xe,{fill:F[s%F.length]},`cell-${s}`))}),e.jsx(ue,{}),e.jsx(me,{})]})})}function De(){return e.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:2},children:e.jsxs(S,{container:!0,spacing:3,children:[e.jsx(S,{item:!0,xs:6,children:e.jsxs(j,{sx:{p:2,width:150,height:350},children:[e.jsx(h,{variant:"h6",children:"Sales by cat"}),e.jsx(A,{})]})}),e.jsx(S,{item:!0,xs:6,children:e.jsxs(j,{sx:{p:2,width:150,height:350},children:[e.jsx(h,{variant:"h6",children:"Sales by month"}),e.jsx(A,{})]})}),e.jsx(S,{item:!0,xs:6,children:e.jsxs(j,{sx:{p:2,width:150,height:350},children:[e.jsx(h,{variant:"h6",children:"Sales by amount"}),e.jsx(A,{})]})}),e.jsx(S,{item:!0,xs:6,children:e.jsxs(j,{sx:{p:2,width:150,height:350},children:[e.jsx(h,{variant:"h6",children:"Users income"}),e.jsx(A,{})]})})]})})}function Ne(){const[t,s]=o.useState([]),[i,d]=o.useState(""),[n,r]=o.useState(""),[c,a]=o.useState("asc");o.useEffect(()=>{(async()=>{try{const v=await(await fetch("https://marketplace-production-2e6c.up.railway.app/products")).json();s(v)}catch(b){console.error(b)}})()},[]);const p=t.filter(l=>l.title&&l.title.toLowerCase().includes(i.toLowerCase())).sort((l,b)=>n?c==="asc"?Number(l[n])-Number(b[n]):Number(b[n])-Number(l[n]):0);return e.jsxs(j,{sx:{p:3},children:[e.jsx(h,{align:"center",variant:"h4",sx:{mb:2},children:"Products"}),e.jsxs(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:2},children:[e.jsx(m,{label:"Enter name",value:i,onChange:l=>d(l.target.value),sx:{mb:2,mr:2}}),e.jsxs(D,{sx:{mb:2,minWidth:150},children:[e.jsx(N,{children:"Sorted by"}),e.jsxs(W,{value:n,onChange:l=>r(l.target.value),label:"Сортувати за",children:[e.jsx(T,{value:"price",children:"Price"}),e.jsx(T,{value:"stock",children:"Available"})]})]}),e.jsxs(D,{sx:{mb:2,minWidth:120,ml:2},children:[e.jsx(N,{children:"Order"}),e.jsxs(W,{value:c,onChange:l=>a(l.target.value),label:"Порядок",children:[e.jsx(T,{value:"asc",children:"toHighest"}),e.jsx(T,{value:"desc",children:"toLower"})]})]})]}),e.jsxs(H,{children:[e.jsx(U,{children:e.jsxs(L,{children:[e.jsx(g,{align:"left",children:"Name"}),e.jsx(g,{align:"center",children:"Price"}),e.jsx(g,{align:"center",children:"Available"})]})}),e.jsx($,{children:p.map(l=>e.jsxs(L,{children:[e.jsx(g,{align:"left",children:l.title}),e.jsx(g,{align:"center",children:l.price}),e.jsx(g,{align:"center",children:l.stock})]},l._id))})]})]})}function We(){const[t,s]=o.useState([]);return o.useEffect(()=>{(async()=>{try{const r=(await(await fetch("https://marketplace-production-2e6c.up.railway.app/users")).json()).filter(c=>c.role!=="admin");s(r)}catch(d){console.error(d)}})()},[]),e.jsxs(j,{sx:{p:3},children:[e.jsx(h,{align:"center",variant:"h4",sx:{mb:2},children:"Clients"}),e.jsxs(H,{children:[e.jsx(U,{children:e.jsxs(L,{children:[e.jsx(g,{children:"Email"}),e.jsx(g,{children:"Role"})]})}),e.jsx($,{children:t.map(i=>e.jsxs(L,{children:[e.jsx(g,{children:i.email}),e.jsx(g,{children:i.role})]},i._id))})]})]})}function Ee(){const t=C(),[s,i]=o.useState(""),[d,n]=o.useState(""),[r,c]=o.useState(""),[a,p]=o.useState(""),[l,b]=o.useState(""),v=async()=>{if(!s||!r||!a)return;const x={title:s,description:d,price:Number(r),stock:Number(a),imageUrl:l||"https://via.placeholder.com/150"};try{await fetch("https://marketplace-production-2e6c.up.railway.app/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),t("/admin/products")}catch(J){console.error(J)}};return e.jsxs(j,{sx:{p:4,maxWidth:600,mx:"auto"},children:[e.jsx(h,{variant:"h4",sx:{mb:3},children:"Add New Product"}),e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(m,{label:"Name",value:s,onChange:x=>i(x.target.value)}),e.jsx(m,{label:"Description",value:d,onChange:x=>n(x.target.value)}),e.jsx(m,{label:"Price",type:"number",value:r,onChange:x=>c(x.target.value)}),e.jsx(m,{label:"Available",type:"number",value:a,onChange:x=>p(x.target.value)}),e.jsx(m,{label:"Image URL",value:l,onChange:x=>b(x.target.value)}),e.jsx(y,{variant:"contained",onClick:v,children:"Create Product"}),e.jsx(y,{variant:"outlined",onClick:()=>t("/admin/products"),children:"Cancel"})]})]})}function Fe(){const[t,s]=o.useState([]);return ge(),e.jsx(e.Fragment,{children:e.jsxs(ye,{children:[e.jsx(f,{path:"/",element:e.jsx(w,{cartItems:t,children:e.jsx(be,{})})}),e.jsx(f,{path:"/products/:id",element:e.jsx(w,{cartItems:t,children:e.jsx(ve,{})})}),e.jsx(f,{path:"/login",element:e.jsx(w,{cartItems:t,children:e.jsx(Se,{})})}),e.jsx(f,{path:"/forgot-password",element:e.jsx(w,{cartItems:t,children:e.jsx(Te,{})})}),e.jsx(f,{path:"/reset/:token",element:e.jsx(w,{cartItems:t,children:e.jsx(Ae,{})})}),e.jsxs(f,{path:"/admin/*",element:e.jsx(Ie,{children:e.jsx(Re,{})}),children:[e.jsx(f,{index:!0,element:e.jsx(_,{to:"products"})}),e.jsx(f,{path:"products",element:e.jsx(Ne,{})}),e.jsx(f,{path:"clients",element:e.jsx(We,{})}),e.jsx(f,{path:"dashboard",element:e.jsx(De,{})}),e.jsx(f,{path:"addproduct",element:e.jsx(Ee,{})})]})]})})}je.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(fe,{basename:"/marketplace/",children:e.jsx(Fe,{})})}));
//# sourceMappingURL=index.js.map
